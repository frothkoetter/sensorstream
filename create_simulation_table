create database workshop;

CREATE EXTERNAL TABLE workshop.simulation (
`__time` timestamp,
`NodeID` string,
`opcvalue`  double
)
STORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler'
TBLPROPERTIES (
"kafka.bootstrap.servers" = "demo.cloudera.com:6667",
"kafka.topic" = "demo_nifi_opc",
"druid.kafka.ingestion.useEarliestOffset" = "true",
"druid.kafka.ingestion.maxRowsInMemory" = "5",
"druid.kafka.ingestion.startDelay" = "PT1S",
"druid.kafka.ingestion.period" = "PT1S",
"druid.kafka.ingestion.consumer.retries" = "2"
);
ALTER TABLE workshop.simulation SET TBLPROPERTIES('druid.kafka.ingestion' = 'START');
